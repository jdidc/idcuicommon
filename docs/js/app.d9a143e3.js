(function(t){function e(e){for(var r,u,i=e[0],c=e[1],s=e[2],l=0,f=[];l<i.length;l++)u=i[l],o[u]&&f.push(o[u][0]),o[u]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);p&&p(e);while(f.length)f.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,u=1;u<n.length;u++){var c=n[u];0!==o[c]&&(r=!1)}r&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},o={app:0},a=[];function u(t){return i.p+"js/"+({}[t]||t)+"."+{"chunk-2d0bd1c6":"2fe21d36","chunk-9426ab02":"8d3cc121","chunk-fa31b2a8":"18fa6629"}[t]+".js"}function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(t){var e=[],n=o[t];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise(function(e,r){n=o[t]=[e,r]});e.push(n[2]=r);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=u(t),a=function(e){c.onerror=c.onload=null,clearTimeout(s);var n=o[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src,u=new Error("Loading chunk "+t+" failed.\n("+r+": "+a+")");u.type=r,u.request=a,n[1](u)}o[t]=void 0}};var s=setTimeout(function(){a({type:"timeout",target:c})},12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(e)},i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var p=s;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"2d33":function(t,e,n){var r=n("f893");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var o=n("499e").default;o("b232ed26",r,!0,{sourceMap:!1,shadowMode:!1})},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-link",{attrs:{to:"/export-button"}},[t._v("export-button")]),n("div",{staticClass:"main"},[n("router-view")],1)],1)},a=[],u={name:"app"},i=u,c=(n("5c0b"),n("2877")),s=Object(c["a"])(i,o,a,!1,null,null,null),l=s.exports,p=n("e069"),f=n.n(p),d=(n("dcad"),n("cebc")),h=n("a4bb"),b=n.n(h),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"button-wrapper",on:{click:t.setTotal}},[t._t("default",[n("Button",{attrs:{icon:"md-download",type:"primary"}},[t._v(t._s(t.title))])]),t.modal?n("processModal",{attrs:{currentNumber:t.currentNumber,exporting:t.exporting,percent:t.percent,total:t.total},on:{startExport:t.startExport},model:{value:t.processModalShow,callback:function(e){t.processModalShow=e},expression:"processModalShow"}}):t._e()],2)},v=[],g=n("75fc"),x=n("795b"),y=n.n(x),w=(n("96cf"),n("3b8d")),k=(n("c5f6"),{name:"ExportButton",components:{processModal:function(){return n.e("chunk-fa31b2a8").then(n.bind(null,"cbdf"))}},props:{request:{type:Function,required:!1},getTotal:Function,pageSize:{default:100,type:Number},modal:{type:Boolean,default:function(){return!0}},data:{type:Array,default:function(){return[]}},filename:{type:String,default:function(){return"导出文件"}},title:{type:String,default:"数据导出"},columns:{type:Array,required:!0},autoWidth:{type:Boolean,default:function(){return!0}},bookType:{type:String,default:function(){return"xlsx"}}},data:function(){return{total:0,percent:0,currentNumber:0,processModalShow:!1,exporting:!1}},methods:{setTotal:function(){var t=Object(w["a"])(regeneratorRuntime.mark(function t(){var e,r,o,a,u;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!(this.data.length>0)){t.next=11;break}return t.next=3,n.e("chunk-9426ab02").then(n.bind(null,"ee30"));case 3:e=t.sent,r=[],o=[],this.columns.forEach(function(t){r.push(t.title),o.push(t.key)}),a=this.formatJson(o,this.data),e.export_json_to_excel({multiHeader:[],header:r,data:a,merges:[],filename:this.filename,autoWidth:this.autoWidth,bookType:this.bookType}),t.next=17;break;case 11:return this.reset(),t.next=14,this.getTotal();case 14:u=t.sent,this.total=u,this.processModalShow=!0;case 17:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getData:function(t){var e=this;return new y.a(function(n){var r=[],o=0,a=e;function u(){a.exporting||(a.exporting=!0),a.request(o,a.pageSize).then(function(e){if(a.addPercent(),o++,r.push.apply(r,Object(g["a"])(e)),a.currentNumber=r.length,!(o>=t))return u();n(r)})}u()})},startExport:function(){var t=Object(w["a"])(regeneratorRuntime.mark(function t(){var e,r,o,a,u,i=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=Math.ceil(this.total/this.pageSize),t.next=3,this.getData(e);case 3:return r=t.sent,console.log("total data",r),t.next=7,n.e("chunk-9426ab02").then(n.bind(null,"ee30"));case 7:o=t.sent,a=[],u=[],this.columns.forEach(function(t){a.push(t.title),u.push(t.key)}),r=this.formatJson(u,r),o.export_json_to_excel({multiHeader:[],header:a,data:r,merges:[],filename:this.filename,autoWidth:this.autoWidth,bookType:"xlsx"}),setTimeout(function(){i.processModalShow=!1,i.exporting=!1},1e3);case 14:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return e[t]})})},addPercent:function(){var t=100/Math.ceil(this.total/this.pageSize);this.percent+=t},reset:function(){this.total=0,this.percent=0,this.currentNumber=0}}}),_=k,j=(n("7747"),Object(c["a"])(_,m,v,!1,null,"39c8df32",null)),M=j.exports,S=M,O={ExportButton:S},T=function(t){b()(O).forEach(function(e){t.component(e,O[e])})},E=Object(d["a"])({install:T},O),P=n("8c4f");r["default"].use(f.a),r["default"].use(E),r["default"].use(P["a"]);var N=new P["a"]({routes:[{path:"/export-button",component:function(){return n.e("chunk-2d0bd1c6").then(n.bind(null,"2b33"))}}]});r["default"].config.productionTip=!1,new r["default"]({router:N,render:function(t){return t(l)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var r=n("e959"),o=n.n(r);o.a},7747:function(t,e,n){"use strict";var r=n("2d33"),o=n.n(r);o.a},a33e:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".main{margin:20px}",""])},e959:function(t,e,n){var r=n("a33e");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var o=n("499e").default;o("6f19147e",r,!0,{sourceMap:!1,shadowMode:!1})},f893:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".button-wrapper[data-v-39c8df32]{display:inline-block}",""])}});
//# sourceMappingURL=app.d9a143e3.js.map